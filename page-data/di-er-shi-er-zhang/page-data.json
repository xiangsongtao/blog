{"componentChunkName":"component---src-templates-blog-post-js","path":"/di-er-shi-er-zhang/","result":{"data":{"site":{"siteMetadata":{"title":"Attila","cover":"/background/1.jpg","description":"Thoughts, stories and ideas.","keywords":["烈风裘的博客","X-Blog","Attila","Gatsby","前端成长记录"],"tagCover":"/background/5.jpg","archiveCover":"/background/escape-flight.png","siteUrl":"https://xiangst0816.github.io/blog","logo":"","navigation":true,"subscribe":true}},"allAuthorJson":{"totalCount":2,"edges":[{"node":{"id":"烈风裘","bio":"一往无前, 直到云开雾散!","avatar":"/avatar/me.jpeg","cover":"/background/photo-1503197979108-c824168d51a8.jpeg","github":"https://github.com/xiangst0816","twitter":"","zhihu":"","weibo":"","facebook":"","website":"https://xiangst0816.github.io/blog/","location":"HangZhou, China"}},{"node":{"id":"WALL-E","bio":"还有要清理的吗?","avatar":"/avatar/cleaner.jpg","cover":"","github":null,"twitter":null,"zhihu":null,"weibo":null,"facebook":null,"website":null,"location":"Earth"}}]},"master":{"id":"烈风裘","bio":"一往无前, 直到云开雾散!","avatar":"/avatar/me.jpeg","cover":"/background/photo-1503197979108-c824168d51a8.jpeg","github":"https://github.com/xiangst0816","twitter":"","zhihu":"","weibo":"","facebook":"","website":"https://xiangst0816.github.io/blog/","location":"HangZhou, China"},"currentPost":{"html":"<h3 id=\"1-类型检测的方式有哪些-使用场景是\" style=\"position:relative;\"><a href=\"#1-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%B5%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%98%AF\" aria-label=\"1 类型检测的方式有哪些 使用场景是 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 类型检测的方式有哪些, 使用场景是?</h3>\n<ul>\n<li>使用 typeof 检测基础类型</li>\n<li>使用 instanceof 检测引用类型</li>\n<li>使用 Object.prototype.toString.call(value)可以处理大部分情况</li>\n</ul>\n<h3 id=\"2-如果类没有用code-classlanguage-textnewcode关键字初始化一般会造成什么后果-怎么避免\" style=\"position:relative;\"><a href=\"#2-%E5%A6%82%E6%9E%9C%E7%B1%BB%E6%B2%A1%E6%9C%89%E7%94%A8code-classlanguage-textnewcode%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E8%88%AC%E4%BC%9A%E9%80%A0%E6%88%90%E4%BB%80%E4%B9%88%E5%90%8E%E6%9E%9C-%E6%80%8E%E4%B9%88%E9%81%BF%E5%85%8D\" aria-label=\"2 如果类没有用code classlanguage textnewcode关键字初始化一般会造成什么后果 怎么避免 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 如果类没有用<code class=\"language-text\">new</code>关键字初始化一般会造成什么后果, 怎么避免?</h3>\n<p>在构造函数中的属性会污染全局变量<code class=\"language-text\">window</code>, 可以在构造函数中通过<code class=\"language-text\">instanceof</code>判断下当前实例的构造函数是不是自己, 如果不是则使用<code class=\"language-text\">new</code>方法返回.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Person</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> job</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>job <span class=\"token operator\">=</span> job<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">,</span> job<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"3-补充一个完整类继承及实例化的示例\" style=\"position:relative;\"><a href=\"#3-%E8%A1%A5%E5%85%85%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%B1%BB%E7%BB%A7%E6%89%BF%E5%8F%8A%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%9A%84%E7%A4%BA%E4%BE%8B\" aria-label=\"3 补充一个完整类继承及实例化的示例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 补充一个完整类继承及实例化的示例?</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 1. 父类定义</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">SuperType</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">SuperType</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SuperType</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">SuperType</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayName</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 2. 子类定义</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">SubType</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> age</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">SubType</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 2.1 继承了 SuperType 构造函数中定义的属性</span>\n    <span class=\"token function\">SuperType</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 2.2 子类自己的属性</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SubType</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 父类原型链复制</span>\n<span class=\"token class-name\">SubType</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SuperType</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 因为使用“.prototype =...”后,constructor会改变为“=...”的那个</span>\n<span class=\"token comment\">// constructor，所以要重新指定.constructor 为自身。</span>\n<span class=\"token class-name\">SubType</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor <span class=\"token operator\">=</span> SubType<span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">SubType</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">sayAge</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>补充 Object.create 的 polyfill:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>create <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">create</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">proto</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">function</span> <span class=\"token constant\">F</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n            <span class=\"token class-name\">F</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> proto\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">F</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"4-讲一个惰性函数的实例场景-优缺点\" style=\"position:relative;\"><a href=\"#4-%E8%AE%B2%E4%B8%80%E4%B8%AA%E6%83%B0%E6%80%A7%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%9C%BA%E6%99%AF-%E4%BC%98%E7%BC%BA%E7%82%B9\" aria-label=\"4 讲一个惰性函数的实例场景 优缺点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 讲一个惰性函数的实例场景, 优缺点?</h3>\n<ul>\n<li>优点: 避免不必要分支执行</li>\n<li>缺点: 运行第一次牺牲点性能</li>\n<li>适用于初次运行就能确定分支方向的场景, 比如能力判断/平台判断等</li>\n</ul>\n<p><strong>两种写法:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xx1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> doSomething <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xx1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"5-code-classlanguage-textbindcode函数使用场景及优缺点\" style=\"position:relative;\"><a href=\"#5-code-classlanguage-textbindcode%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%8F%8A%E4%BC%98%E7%BC%BA%E7%82%B9\" aria-label=\"5 code classlanguage textbindcode函数使用场景及优缺点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. <code class=\"language-text\">bind()</code>函数使用场景及优缺点?</h3>\n<p>支持原生<code class=\"language-text\">bind()</code>函数的浏览器有: IE9+/Firefox4+/Chrome 等, 其他浏览器需要 Polyfill:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>bind <span class=\"token operator\">===</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">bind</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> _self <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">_self</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">bind()</code>函数固定了执行环境, 对于异步环境保持<code class=\"language-text\">this</code>指向有很大帮助</li>\n<li>类似于: <code class=\"language-text\">setTimeout</code>/<code class=\"language-text\">setInterval</code>/事件绑定等</li>\n<li>与普通函数相比会使用更多开销和内存, 使用时注意</li>\n</ul>\n<h3 id=\"6-如何理解函数柯里化\" style=\"position:relative;\"><a href=\"#6-%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96\" aria-label=\"6 如何理解函数柯里化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 如何理解函数柯里化?</h3>\n<p>函数柯里化：用于创建一个已经设置好一个或多个参数的函数。简单的说，对函数的一次分装，简化操作的方式。这个过程需要创建一个闭包，指定某个入参后返回新函数。</p>\n<p>这个过程可能会用到：<code class=\"language-text\">call</code>、<code class=\"language-text\">apply</code>、<code class=\"language-text\">Array.prototype.slice.call(arguments, n)</code>、<code class=\"language-text\">bind</code>等函数。</p>\n<h3 id=\"7-在编写库时-如何防止核心对象被意外修改\" style=\"position:relative;\"><a href=\"#7-%E5%9C%A8%E7%BC%96%E5%86%99%E5%BA%93%E6%97%B6-%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E6%A0%B8%E5%BF%83%E5%AF%B9%E8%B1%A1%E8%A2%AB%E6%84%8F%E5%A4%96%E4%BF%AE%E6%94%B9\" aria-label=\"7 在编写库时 如何防止核心对象被意外修改 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 在编写库时, 如何防止核心对象被意外修改?</h3>\n<p>根据对象防篡改等级, 可以分为以下几种:</p>\n<h4 id=\"第一级-不可扩展对象code-classlanguage-textobjectpreventextensionsobjcode\" style=\"position:relative;\"><a href=\"#%E7%AC%AC%E4%B8%80%E7%BA%A7-%E4%B8%8D%E5%8F%AF%E6%89%A9%E5%B1%95%E5%AF%B9%E8%B1%A1code-classlanguage-textobjectpreventextensionsobjcode\" aria-label=\"第一级 不可扩展对象code classlanguage textobjectpreventextensionsobjcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第一级: <strong>不可扩展对象<code class=\"language-text\">Object.preventExtensions(obj)</code></strong></h4>\n<ul>\n<li>不可再添加属性和方法</li>\n<li>已有属性和方法不受影响</li>\n<li>通过<code class=\"language-text\">Object.isExtensible(obj)</code>判断是否可拓展</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"Nicholas\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">preventExtensions</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nperson<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">29</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//undefined</span></code></pre></div>\n<h4 id=\"第二级-密封对象code-classlanguage-textobjectsealobjcode\" style=\"position:relative;\"><a href=\"#%E7%AC%AC%E4%BA%8C%E7%BA%A7-%E5%AF%86%E5%B0%81%E5%AF%B9%E8%B1%A1code-classlanguage-textobjectsealobjcode\" aria-label=\"第二级 密封对象code classlanguage textobjectsealobjcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第二级: <strong>密封对象<code class=\"language-text\">Object.seal(obj)</code></strong></h4>\n<ul>\n<li>继承上一级</li>\n<li>已有成员不可删除, 但属性值可修改</li>\n<li>通过<code class=\"language-text\">Object.isSealed(obj)</code>判断是否被密封</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> person <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"Nicholas\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">seal</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nperson<span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> <span class=\"token number\">29</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//undefined</span>\n\n<span class=\"token keyword\">delete</span> person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//\"Nicholas\"</span></code></pre></div>\n<h4 id=\"第三级-冻结对象code-classlanguage-textobjectfreezeobjcode\" style=\"position:relative;\"><a href=\"#%E7%AC%AC%E4%B8%89%E7%BA%A7-%E5%86%BB%E7%BB%93%E5%AF%B9%E8%B1%A1code-classlanguage-textobjectfreezeobjcode\" aria-label=\"第三级 冻结对象code classlanguage textobjectfreezeobjcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>第三级: <strong>冻结对象<code class=\"language-text\">Object.freeze(obj)</code></strong></h4>\n<ul>\n<li>继承上两级</li>\n<li>以后成员不可修改</li>\n<li>如果要修改需要重新定义<code class=\"language-text\">[[set]]</code>函数</li>\n<li>通过<code class=\"language-text\">Object.isFrozen(obj)</code>判断是否被冻结</li>\n</ul>\n<h4 id=\"函数设计的意义\" style=\"position:relative;\"><a href=\"#%E5%87%BD%E6%95%B0%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%84%8F%E4%B9%89\" aria-label=\"函数设计的意义 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>函数设计的意义</h4>\n<p>对 JavaScript 库的作者而言，冻结对象是很有用的。因为 JavaScript 库最怕有人意外（或有意）地修 改了库中的核心对象。冻结（或密封）主要的库对象能够防止这些问题的发生。</p>\n<h3 id=\"8-javascript-的定时器相关点\" style=\"position:relative;\"><a href=\"#8-javascript-%E7%9A%84%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9B%B8%E5%85%B3%E7%82%B9\" aria-label=\"8 javascript 的定时器相关点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. JavaScript 的定时器相关点</h3>\n<ul>\n<li>JavaScript 运行在<strong>单线程</strong>环境中, 某个时刻只有一个代码在执行.</li>\n<li>异步代码会被推入独立的<strong>异步队列(Tasks)</strong></li>\n<li>在 JavaScript 中<strong>代码不会立刻执行</strong>的，但<strong>一旦进程空闲则尽快执行</strong></li>\n<li>浏览器在这个过程中只负责排序调度, 指派某段代码在某个时间点运行的优先级.</li>\n<li>定时器队列是一个特殊的队列, 当定时的时间到了, 就将代码插入异步队列</li>\n<li>定时器中设定的时间<strong>表示何时将定时器的代码添加到异步队列</strong>, 而不是何时执行代码</li>\n<li>队列中的所有代码都要<strong>等到 JavaScript 进程空闲后才能执行</strong>, 而不管他们是如何添加到队列中</li>\n<li>即使执行完一个异步代码(Tasks）, <strong>也会有一个很短的时间间隔</strong>, 用于处理页面上的其他事情(UI 更新), 防止页面锁定</li>\n</ul>\n<h3 id=\"9-每个-tasks-异步都是紧挨着立即执行吗\" style=\"position:relative;\"><a href=\"#9-%E6%AF%8F%E4%B8%AA-tasks-%E5%BC%82%E6%AD%A5%E9%83%BD%E6%98%AF%E7%B4%A7%E6%8C%A8%E7%9D%80%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%90%97\" aria-label=\"9 每个 tasks 异步都是紧挨着立即执行吗 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. 每个 Tasks 异步都是紧挨着立即执行吗?</h3>\n<p>不是, 中间会有段时间间隔以便 UI 等工作，当 JavaScript 主进程空闲时, 才将 Tasks 中的异步代码插入 stack 中。</p>\n<h3 id=\"10-当code-classlanguage-textsetintervalcode中的函数处理时间超过设置的间隔会发生什么问题-怎么避免或修复\" style=\"position:relative;\"><a href=\"#10-%E5%BD%93code-classlanguage-textsetintervalcode%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0%E5%A4%84%E7%90%86%E6%97%B6%E9%97%B4%E8%B6%85%E8%BF%87%E8%AE%BE%E7%BD%AE%E7%9A%84%E9%97%B4%E9%9A%94%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98-%E6%80%8E%E4%B9%88%E9%81%BF%E5%85%8D%E6%88%96%E4%BF%AE%E5%A4%8D\" aria-label=\"10 当code classlanguage textsetintervalcode中的函数处理时间超过设置的间隔会发生什么问题 怎么避免或修复 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. 当<code class=\"language-text\">setInterval</code>中的函数处理时间超过设置的间隔会发生什么问题, 怎么避免或修复?</h3>\n<p><strong>注意点：</strong></p>\n<p>当在 Tasks 队列中<strong>没有</strong>该定时器的任何其他代码实例时，<strong>才将定时器代码添加到队列中</strong>。这确保<strong>定时器代码被加入到 Tasks 队列中</strong>的<strong>最短时间间隔</strong>为指定的间隔。<mark>这里是加入到 Tasks 队列，不是立即执行。</mark></p>\n<p>因此：</p>\n<ul>\n<li>某些定时器回调会被<strong>跳过</strong></li>\n<li>多个定时器代码<strong>执行之间的间隔</strong>会比预期小</li>\n</ul>\n<p>可以使用两个<code class=\"language-text\">setTimeout</code>解决：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//处理中</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">.</span>callee<span class=\"token punctuation\">,</span> interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"11-如果一个-js-函数执行时间接近-1s-如何优化执行不会让-ui-卡顿\" style=\"position:relative;\"><a href=\"#11-%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA-js-%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%E6%8E%A5%E8%BF%91-1s-%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E6%89%A7%E8%A1%8C%E4%B8%8D%E4%BC%9A%E8%AE%A9-ui-%E5%8D%A1%E9%A1%BF\" aria-label=\"11 如果一个 js 函数执行时间接近 1s 如何优化执行不会让 ui 卡顿 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. 如果一个 JS 函数执行时间接近 1s, 如何优化执行不会让 UI 卡顿?</h3>\n<ul>\n<li>不必要的<strong>同步部分</strong>放入 setTimeout 中</li>\n<li>使用问题 10 中的方式处理，间隔时间设为 0</li>\n</ul>\n<h3 id=\"12-函数防抖是如何控制调用执行的次数的\" style=\"position:relative;\"><a href=\"#12-%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E6%98%AF%E5%A6%82%E4%BD%95%E6%8E%A7%E5%88%B6%E8%B0%83%E7%94%A8%E6%89%A7%E8%A1%8C%E7%9A%84%E6%AC%A1%E6%95%B0%E7%9A%84\" aria-label=\"12 函数防抖是如何控制调用执行的次数的 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. 函数防抖是如何控制调用执行的次数的?</h3>\n<p><code class=\"language-text\">clearTimeout</code>和<code class=\"language-text\">setTimeout</code>的组合使用</p>\n<h3 id=\"13-debounce-和-throttle-两个函数的区别\" style=\"position:relative;\"><a href=\"#13-debounce-%E5%92%8C-throttle-%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"13 debounce 和 throttle 两个函数的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. debounce 和 throttle 两个函数的区别?</h3>\n<p><strong>debounce</strong>：</p>\n<p>防抖函数，多次触发只执行最后一次，保证 ideal 时间。比如 input 联想、window 的 resize 事件。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">clear</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>需要注意的地方:</strong></p>\n<ul>\n<li>计时器 timer 放在要处理的函数上, 因为是引用关系, 下次进入能携带 timer 信息</li>\n<li>每次执行完毕记得清理 timer 信息, 防止下次调用产生问题</li>\n<li>clear 主要作用是清理定时器</li>\n</ul>\n<p><strong>throttle</strong>：</p>\n<p>节流函数，根据时间节奏触发，保证间隔。比如点击事件保证间隔，scroll 时控制在 16.6ms 内执行一次等。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">clear</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      fn<span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>需要注意的地方:</strong></p>\n<ul>\n<li>计时器 timer 放在要处理的函数上, 因为是引用关系, 下次进入能携带 timer 信息</li>\n<li>每次执行完毕记得清理 timer 信息, 防止下次调用产生问题</li>\n<li>先设置定时, 再去 call 函数</li>\n</ul>\n<h3 id=\"14-实现一个自定义事件库需要用到哪个设计模式\" style=\"position:relative;\"><a href=\"#14-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%BA%93%E9%9C%80%E8%A6%81%E7%94%A8%E5%88%B0%E5%93%AA%E4%B8%AA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F\" aria-label=\"14 实现一个自定义事件库需要用到哪个设计模式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. 实现一个自定义事件库需要用到哪个设计模式?</h3>\n<p>观察者模式</p>\n<h3 id=\"15-设计自定义事件库必须具备的功能有哪些\" style=\"position:relative;\"><a href=\"#15-%E8%AE%BE%E8%AE%A1%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%BA%93%E5%BF%85%E9%A1%BB%E5%85%B7%E5%A4%87%E7%9A%84%E5%8A%9F%E8%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B\" aria-label=\"15 设计自定义事件库必须具备的功能有哪些 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>15. 设计自定义事件库必须具备的功能有哪些?</h3>\n<ul>\n<li>定义一个 hash 对象，key 为事件名，value 为回调函数数组</li>\n<li>事件包括的方法有：on、off、once、emit</li>\n<li>参考这个库的设计: <a href=\"https://github.com/typescript-practice/events\" target=\"_target\" rel=\"nofollow\">events</a></li>\n</ul>\n<h3 id=\"16-简述拖放实现的方式是\" style=\"position:relative;\"><a href=\"#16-%E7%AE%80%E8%BF%B0%E6%8B%96%E6%94%BE%E5%AE%9E%E7%8E%B0%E7%9A%84%E6%96%B9%E5%BC%8F%E6%98%AF\" aria-label=\"16 简述拖放实现的方式是 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>16. 简述拖放实现的方式是?</h3>\n<p>监听 mousedown、mouseup、mousemove 事件然后进行相应处理。</p>\n<ul>\n<li>mousedown：记录拖动元素</li>\n<li>mousemove：对拖动元素修改 style 的 top、left 属性</li>\n<li>mouseup：清理操作</li>\n</ul>","timeToRead":12,"wordCount":{"paragraphs":86,"sentences":86,"words":288},"fields":{"slug":"/di-er-shi-er-zhang/","relativePath":"2018/2018-03-21---di-er-shi-er-zhang/index.md"},"excerpt":"1. 类型检测的方式有哪些, 使用场景是? 使用 typeof 检测基础类型 使用 instanceof 检测引用类型 使用 Object.prototype.toString.call(value…","frontmatter":{"title":"第二十二章 高级技巧","date":"21 Mar 2018","tags":["JS高程"],"cover":"","comments":true,"author":"烈风裘"}},"nextPost":{"html":"<h3 id=\"1-xmlhttprequestd-对象发送请求的步骤-使用code-classlanguage-textgetcode和code-classlanguage-textpostcode方法举例\" style=\"position:relative;\"><a href=\"#1-xmlhttprequestd-%E5%AF%B9%E8%B1%A1%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E7%9A%84%E6%AD%A5%E9%AA%A4-%E4%BD%BF%E7%94%A8code-classlanguage-textgetcode%E5%92%8Ccode-classlanguage-textpostcode%E6%96%B9%E6%B3%95%E4%B8%BE%E4%BE%8B\" aria-label=\"1 xmlhttprequestd 对象发送请求的步骤 使用code classlanguage textgetcode和code classlanguage textpostcode方法举例 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. XMLHttpRequestd 对象发送请求的步骤, 使用<code class=\"language-text\">get</code>和<code class=\"language-text\">post</code>方法举例?</h3>\n<ol>\n<li>创建 xhr 实例</li>\n<li>open 一个请求</li>\n<li>设置 header</li>\n<li>send 请求</li>\n<li>如果满足条件可以 abort</li>\n</ol>\n<p><strong>get()同步示例:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"example.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyHeader\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"MyValue\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">304</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Request was unsuccessful: \"</span> <span class=\"token operator\">+</span> xhr<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>get()异步示例:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">304</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Request was unsuccessful: \"</span> <span class=\"token operator\">+</span> xhr<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"example.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyHeader\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"MyValue\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>post()示例:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>readyState <span class=\"token operator\">==</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">304</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Request was unsuccessful: \"</span> <span class=\"token operator\">+</span> xhr<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"postexample.php\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 模拟表单</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"application/x-www-form-urlencoded\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> form <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user-info\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>注意点:</strong></p>\n<ul>\n<li>如果是相对路径, 则 URL 相对于执行代码的当前页面</li>\n<li>调用** <code class=\"language-text\">open()</code> 方法并不会真正发送请求， 而只是启动一个请求以备发送**</li>\n<li>调用 <code class=\"language-text\">send()</code> 之后，请求就会被分派到服务器</li>\n<li>通过<code class=\"language-text\">xhr.status</code>来检测返回状态, responseText 返回响应结果</li>\n<li>异步需要注册<code class=\"language-text\">xhr.onreadystatechange</code>回调, 通过<code class=\"language-text\">xhr.readyState</code>查看请求状态(0: 请求未初始化; 1: 请求已建立但未发送; 2: 请求已发送在处理; 3: 请求在处理, 数据没全部接受, 可多次触发; 4: 响应已完成;), 通过<code class=\"language-text\">xhr.status</code>判断结果状态</li>\n<li>在接收到响应之前还可以调用 <code class=\"language-text\">abort()</code> 方法来取消异步请求, 执行之后 XHR 不再触发事件.</li>\n<li>要成功发送请求头部信息，必须在调用 open()方法之后且调用 send()方法 之前调用 setRequestHeader()</li>\n<li>只有部分的浏览器头部信息可以重写, 这个和浏览器有关</li>\n<li>如果设置了超时, 则超时后会触发<code class=\"language-text\">xhr.readyState == 4</code>的状态, 但是 xhr 对象不可再访问, 建议在 try-catch 包裹</li>\n</ul>\n<h3 id=\"2-上传文件的思路是什么-如何给出进度信息\" style=\"position:relative;\"><a href=\"#2-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E6%80%9D%E8%B7%AF%E6%98%AF%E4%BB%80%E4%B9%88-%E5%A6%82%E4%BD%95%E7%BB%99%E5%87%BA%E8%BF%9B%E5%BA%A6%E4%BF%A1%E6%81%AF\" aria-label=\"2 上传文件的思路是什么 如何给出进度信息 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 上传文件的思路是什么, 如何给出进度信息?</h3>\n<ul>\n<li>onloadstart 事件开始</li>\n<li>onprogress 事件在接收期间不断响应</li>\n</ul>\n<h3 id=\"3-解释下跨域\" style=\"position:relative;\"><a href=\"#3-%E8%A7%A3%E9%87%8A%E4%B8%8B%E8%B7%A8%E5%9F%9F\" aria-label=\"3 解释下跨域 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 解释下跨域?</h3>\n<p>当协议(protocol)/IP/端口(port)三者一个不相同就出现跨域.</p>\n<h3 id=\"4-preflight-request-是什么-跨域时发送的code-classlanguage-textoptionscode请求的原因\" style=\"position:relative;\"><a href=\"#4-preflight-request-%E6%98%AF%E4%BB%80%E4%B9%88-%E8%B7%A8%E5%9F%9F%E6%97%B6%E5%8F%91%E9%80%81%E7%9A%84code-classlanguage-textoptionscode%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8E%9F%E5%9B%A0\" aria-label=\"4 preflight request 是什么 跨域时发送的code classlanguage textoptionscode请求的原因 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Preflight Request 是什么? 跨域时发送的<code class=\"language-text\">OPTIONS</code>请求的原因?</h3>\n<p><strong>CORS</strong>（Cross-Origin Resource Sharing，跨源资源共享）背后的基本思想:</p>\n<blockquote>\n<p><strong>使用自定义的 HTTP 头部让浏览器与服务器沟通, 从而决定请求或响应是应该成功, 还是应该失败.</strong></p>\n</blockquote>\n<p>CORS 通过 Preflight Request 机制向服务器验证请求. 这种请求使用<code class=\"language-text\">OPTIONS</code>方法发送, 包含:</p>\n<ul>\n<li>Origin：与简单的请求相同。</li>\n<li>Access-Control-Request-Method：请求自身使用的方法。</li>\n<li>Access-Control-Request-Headers：（可选）自定义的头部信息，多个头部以逗号分隔。</li>\n</ul>\n<p>服务器根据发来的请求判断是否回应, 如果回应则发送下列信息:</p>\n<ul>\n<li>Access-Control-Allow-Origin：与简单的请求相同。</li>\n<li>Access-Control-Allow-Methods：允许的方法，多个方法以逗号分隔。</li>\n<li>Access-Control-Allow-Headers：允许的头部，多个头部以逗号分隔。</li>\n<li>Access-Control-Max-Age：应该将这个 Preflight 请求缓存多长时间（以秒表示）。</li>\n</ul>\n<p>为此付出的代价<strong>只是第一次发送这种请求时会多一次 HTTP 请求</strong>.</p>\n<blockquote>\n<p>注意:</p>\n<ol>\n<li>这个机制, <strong>IE 10 及更早版本</strong>都不支持</li>\n<li>这个过程一般是<strong>不携带 cookie 等信息</strong>, 除非设置<code class=\"language-text\">xhr.withCredentials=true</code></li>\n<li>如果发送的是带凭证的请求但是服务器响应中没包含这个头部, 则浏览器就不会把响应交给 JavaScript. 于是，responseText 中将是空字符串，status 的值为 0，而且会调用 onerror()事件处理程序</li>\n</ol>\n</blockquote>\n<h3 id=\"5-使用-axios-在-ie10-跨域发送code-classlanguage-textoptioncode无法携带-cookie-等验证信息怎么解决\" style=\"position:relative;\"><a href=\"#5-%E4%BD%BF%E7%94%A8-axios-%E5%9C%A8-ie10-%E8%B7%A8%E5%9F%9F%E5%8F%91%E9%80%81code-classlanguage-textoptioncode%E6%97%A0%E6%B3%95%E6%90%BA%E5%B8%A6-cookie-%E7%AD%89%E9%AA%8C%E8%AF%81%E4%BF%A1%E6%81%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3\" aria-label=\"5 使用 axios 在 ie10 跨域发送code classlanguage textoptioncode无法携带 cookie 等验证信息怎么解决 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 使用 axios 在 IE10-跨域发送<code class=\"language-text\">option</code>无法携带 cookie 等验证信息怎么解决?</h3>\n<p>在 IE10-中, 当 axios 在检测到发送的是跨域请求时(非同源), 使用的是微软特殊的 XDomainRequest 而不是一般的 XMLHttpRequest 实现的, XDomainRequest 在请求时为了安全会做出以下限制:</p>\n<ul>\n<li>cookie 不会随之发送</li>\n<li>只能设置请求头部信息中的 Content-Type 字段</li>\n<li>不能访问响应头部信息</li>\n<li>只支持 GET 和 POST 请求</li>\n</ul>\n<p>因此, 在 IE10-情况下, 跨域验证只能想别的办法. 如果是其余浏览器, 需要将<code class=\"language-text\">withCredentials</code>手动设置为 true, 可以指定某个请求应该发送凭据.</p>\n<blockquote>\n<p>axios 中<code class=\"language-text\">xhr.withCredentials</code>默认为<code class=\"language-text\">false</code></p>\n</blockquote>\n<h3 id=\"6-跨域联调需要做好哪些设置\" style=\"position:relative;\"><a href=\"#6-%E8%B7%A8%E5%9F%9F%E8%81%94%E8%B0%83%E9%9C%80%E8%A6%81%E5%81%9A%E5%A5%BD%E5%93%AA%E4%BA%9B%E8%AE%BE%E7%BD%AE\" aria-label=\"6 跨域联调需要做好哪些设置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 跨域联调需要做好哪些设置?</h3>\n<ol>\n<li>服务端需要设置好<code class=\"language-text\">Access-Control-Allow-Origin</code>规则,</li>\n<li>如果需要在<code class=\"language-text\">OPTIONS</code>发送额外验证信息, 需要开启<code class=\"language-text\">xhr.withCredentials</code>属性, 这个属性只在 IE11+上有用, 默认为<code class=\"language-text\">false</code></li>\n<li>如果是内部联调, 开发可以使用代理转发的方式避免跨域</li>\n<li>如果跨域请求并携带 cookie 验证, 服务端验证通过但客户端还是报错, 需要检查下服务端是否返回这个: <code class=\"language-text\">Access-Control-Allow-Credentials: true</code></li>\n</ol>\n<h3 id=\"7-有些网页功能只能在内网环境下工作-在外网需要隐藏-这个功能如何实现\" style=\"position:relative;\"><a href=\"#7-%E6%9C%89%E4%BA%9B%E7%BD%91%E9%A1%B5%E5%8A%9F%E8%83%BD%E5%8F%AA%E8%83%BD%E5%9C%A8%E5%86%85%E7%BD%91%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%B7%A5%E4%BD%9C-%E5%9C%A8%E5%A4%96%E7%BD%91%E9%9C%80%E8%A6%81%E9%9A%90%E8%97%8F-%E8%BF%99%E4%B8%AA%E5%8A%9F%E8%83%BD%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0\" aria-label=\"7 有些网页功能只能在内网环境下工作 在外网需要隐藏 这个功能如何实现 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 有些网页功能只能在内网环境下工作, 在外网需要隐藏, 这个功能如何实现?</h3>\n<blockquote>\n<p>提示: 内网可能会有多个 ip/端口/内部域名, 但共同点是内网在外部都无法访问.</p>\n</blockquote>\n<p>使用图像 ping 方式. 尝试请求内网的图片, 如果成功执行<code class=\"language-text\">onload</code>回调, 如果失败执行<code class=\"language-text\">onerror</code>回调.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nimg<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nimg<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Done!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nimg<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"http://www.example.com/test?name=Nicholas\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"8-如何统计-jsdk-的使用信息\" style=\"position:relative;\"><a href=\"#8-%E5%A6%82%E4%BD%95%E7%BB%9F%E8%AE%A1-jsdk-%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BF%A1%E6%81%AF\" aria-label=\"8 如何统计 jsdk 的使用信息 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 如何统计 JSDK 的使用信息?</h3>\n<p>使用图像 ping 方式. 请求远程服务的 gif 图片并在 url 参数中携带使用信息.</p>\n<h3 id=\"9-jsonp-的实现方式及存在的问题\" style=\"position:relative;\"><a href=\"#9-jsonp-%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%8F%8A%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98\" aria-label=\"9 jsonp 的实现方式及存在的问题 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. JSONP 的实现方式及存在的问题?</h3>\n<ul>\n<li>callback 函数需要放到 window 上(全局)</li>\n<li>外部源如果不安全会出现漏洞, XSS/CSRF 等</li>\n</ul>\n<h3 id=\"10-jsonp-和-ajax-的关系\" style=\"position:relative;\"><a href=\"#10-jsonp-%E5%92%8C-ajax-%E7%9A%84%E5%85%B3%E7%B3%BB\" aria-label=\"10 jsonp 和 ajax 的关系 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. JSONP 和 Ajax 的关系?</h3>\n<p>两者没关系.</p>\n<p>JSONP 过程:</p>\n<ul>\n<li>创建 JS 脚本</li>\n<li>向服务端请求数据并在 url 参数中携带 callback 函数,</li>\n<li>服务器获得请求将 callback 对应的函数名与数据结合发送给客户端</li>\n<li>脚本加载完成, 客户端执行 callback 函数并处理包含的数据</li>\n</ul>\n<h3 id=\"11-comet-长轮询和短轮询的过程及问题点\" style=\"position:relative;\"><a href=\"#11-comet-%E9%95%BF%E8%BD%AE%E8%AF%A2%E5%92%8C%E7%9F%AD%E8%BD%AE%E8%AF%A2%E7%9A%84%E8%BF%87%E7%A8%8B%E5%8F%8A%E9%97%AE%E9%A2%98%E7%82%B9\" aria-label=\"11 comet 长轮询和短轮询的过程及问题点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. Comet, 长轮询和短轮询的过程及问题点?</h3>\n<p>有两种实现 Comet 的方式：轮询和流. 轮询分为长轮询和短轮询.</p>\n<p><strong>短轮询:</strong></p>\n<p>客户端定时发送请求.</p>\n<p><strong>长轮询:</strong></p>\n<p>客户端发送请求, 服务端有数据后再返回, 客户端接收后随即再发起请求.</p>\n<p><strong>HTTP 流</strong></p>\n<p>流不同于上述两种轮询，因为它在页面的整个生命周期内只 使用一个 HTTP 连接。服务端不断向客户端吐数据, 客户端通过<code class=\"language-text\">xhr.readyState == 3</code> 截取收到的东西, 这里说明两个接口.</p>\n<h3 id=\"12-sse-和-websockets-的区别\" style=\"position:relative;\"><a href=\"#12-sse-%E5%92%8C-websockets-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"12 sse 和 websockets 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. SSE 和 WebSockets 的区别</h3>\n<ul>\n<li>SSE API(服务器发送事件), IE 不支持, 使用 XHR 也可以实现</li>\n<li>Web Sockets, 使用自定义协议, 双向通信, 需要专门服务器, 使用 SSE 和 XHR 可能实现</li>\n</ul>\n<h3 id=\"13-如何保证接口安全-可用的措施是\" style=\"position:relative;\"><a href=\"#13-%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%8E%A5%E5%8F%A3%E5%AE%89%E5%85%A8-%E5%8F%AF%E7%94%A8%E7%9A%84%E6%8E%AA%E6%96%BD%E6%98%AF\" aria-label=\"13 如何保证接口安全 可用的措施是 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. 如何保证接口安全, 可用的措施是?</h3>\n<p>为确保通过 XHR 访问的 URL 安全，通行的做法就是验证发送请求者是否有权限访问相应的资源。 有下列几种方式可供选择</p>\n<ul>\n<li>要求以 SSL 连接来访问可以通过 XHR 请求的资源。</li>\n<li>要求每一次请求都要附带经过相应算法计算得到的验证码。</li>\n<li>都走 post 请求, 请求 body 加密(网易云音乐接口)</li>\n</ul>\n<h3 id=\"14-http-keep-alive-和-tcp-keepalive-的区别\" style=\"position:relative;\"><a href=\"#14-http-keep-alive-%E5%92%8C-tcp-keepalive-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"14 http keep alive 和 tcp keepalive 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. HTTP keep-alive 和 TCP keepalive 的区别?</h3>\n<h4 id=\"http-建立在-tcp-之上\" style=\"position:relative;\"><a href=\"#http-%E5%BB%BA%E7%AB%8B%E5%9C%A8-tcp-%E4%B9%8B%E4%B8%8A\" aria-label=\"http 建立在 tcp 之上 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP 建立在 TCP 之上</h4>\n<p>TCP 协议对应于传输层，而 HTTP 协议对应于应用层，从本质上来说，二者没有可比性。</p>\n<h4 id=\"tcp-keepalive\" style=\"position:relative;\"><a href=\"#tcp-keepalive\" aria-label=\"tcp keepalive permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TCP keepalive</h4>\n<blockquote>\n<p><strong>保活, 心跳, 检测连接错误</strong></p>\n</blockquote>\n<p>双方建立交互的链接不一定一直存在数据交互, 期间使用保活报文探测对方是否还在. 中间过程会遇到防火墙等中间设备, 会对 TCP 保活产生影响.</p>\n<h4 id=\"http-keep-alive\" style=\"position:relative;\"><a href=\"#http-keep-alive\" aria-label=\"http keep alive permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP keep-alive</h4>\n<blockquote>\n<p><strong>连接复用</strong></p>\n</blockquote>\n<p>在一个 TCP 链接上进行多次 HTTP 请求从而提高性能.</p>\n<p>Httpd 守护进程，一般都提供了 keep-alive timeout 时间设置参数. 正常情况下, 一个 HTTP 产生的 TCP 链接在传送完最后一个响应后, 马上主动关闭响应的 TCP 链接, 但是设置了 timeout 后, httpd 守护进程会等待以下, 如果还未有数据交互, 则关闭 HTTP 连接.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.38095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACbElEQVQoz2VTS2gTURQ9b77NJDOZyW9iPjWTxgTbpAVj8VO0fiKIWCsKAamlIqgYirow6MKVbtwVFQTTRRHqB8EquHQhFHWjiHWjoEJX7hRx43K8M5NJR71w571337mf8+4dwBWujz4l0gxjKYlBCQOKCTCLbAbWRHNwDIgxHiFaZSCcIv8i2dMuQnnPSeIU4sJ6bVQKV7SAs0I6AI7zbB94AedgYos4hq2bkgFciLQAiF3fT6KMR1Axu70fBTuUwKph4ZuhY7UgYUKFG9UGbkgiLTJrbjDNwrxZxA+9zL5GE/hsxXA16UXewRyM/EaAcZvlRzq4mJpGJ3oBC8ZezGV05F26iXKxV04/JlOH0Rk6wZa0k3isD+NJ0cRkugdotvlE8xSKe/ZVxmvGW8pkM+/mnkSsNZ99xsq4O5O3YgdY28jgd2Q/lpMVPN+YRivlUefTgac4pu6GLdfxKtXAy1wZyyMR7Iw7N+vQoO8ZePQn0gepwm1YSQzgu5rEgq6i7jxNlDSP11Uh+qyE7Fy8tOuBcDr5i9L4KWij+vvrMN3KZVSNo7iWmcHTaAuL0QpeVE2cdcvnEFJQu8X0ehu55HSuhpJNZdsKmB2O4F2ex2BvZH7SaFFr9PvQBu+gkXVsK7jMn6f2Rmh2KL3ikvFlBoesS7ibnsK8MYtFYzMeWhEMx7zbMdykobRpVMdpBkMBFnQUqDa1S0WgV+OUjwLMJd4Y+sKOy1dwhLPR6jbGyezz5romjioxAs/C8z4uIILk/CV/WaARiGW9E3On19shT9oXgMpuM/4RFgbvBMUo0fNLIRXxv4he3DXfIO4PaLRglUXbJz4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"HTTP Keep-Alive模型\"\n        title=\"HTTP Keep-Alive模型\"\n        src=\"/blog/static/8f6f66911ea7769142c4501ce2a1e455/f88f5/keep-alive.png\"\n        srcset=\"/blog/static/8f6f66911ea7769142c4501ce2a1e455/e1650/keep-alive.png 210w,\n/blog/static/8f6f66911ea7769142c4501ce2a1e455/8cae7/keep-alive.png 420w,\n/blog/static/8f6f66911ea7769142c4501ce2a1e455/f88f5/keep-alive.png 840w,\n/blog/static/8f6f66911ea7769142c4501ce2a1e455/1084e/keep-alive.png 1000w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">HTTP Keep-Alive模型</figcaption>\n  </figure></p>\n<p>HTTP1.0 中默认是关闭的，需要在 HTTP 头加入”Connection: Keep-Alive”，才能启用 Keep-Alive；HTTP1.1 中默认启用 Keep-Alive，加入”Connection: close “，才关闭。</p>\n<h4 id=\"两者的关系\" style=\"position:relative;\"><a href=\"#%E4%B8%A4%E8%80%85%E7%9A%84%E5%85%B3%E7%B3%BB\" aria-label=\"两者的关系 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>两者的关系</h4>\n<p>http keep-alive 与 tcp keep-alive，不是同一回事，意图不一样。http keep-alive 是为了让 tcp 活得更久一点，以便在同一个连接上传送多个 http，提高 socket 的效率。而 tcp keep-alive 是 TCP 的一种检测 TCP 连接状况的保鲜机制。</p>\n<h4 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h4>\n<ul>\n<li><a href=\"https://www.cnblogs.com/laowenBlog/p/6096239.html\" target=\"_target\" rel=\"nofollow\">HTTP Keep-Alive 模式</a></li>\n<li><a href=\"https://www.jianshu.com/p/e99e0e505c79\" target=\"_target\" rel=\"nofollow\">Http keep-alive 分析</a></li>\n</ul>","timeToRead":11,"wordCount":{"paragraphs":102,"sentences":111,"words":476},"fields":{"slug":"/di-er-shi-yi-zhang/","relativePath":"2018/2018-03-20---di-er-shi-yi-zhang/index.md"},"excerpt":"1. XMLHttpRequestd 对象发送请求的步骤, 使用和方法举例? 创建 xhr 实例 open 一个请求 设置 header send 请求 如果满足条件可以 abort get()同步示例: get…","frontmatter":{"title":"第二十一章 Ajax与Comet","date":"20 Mar 2018","tags":["JS高程"],"cover":"","comments":true,"author":"烈风裘"}},"prevPost":{"html":"<blockquote>\n<p>这里介绍的不是 SPA 和 PWA。</p>\n</blockquote>\n<p>我觉得这可能是未来<strong>前后端分离的新方式</strong>，因为：</p>\n<h3 id=\"更快的页面显示\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E5%BF%AB%E7%9A%84%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA\" aria-label=\"更快的页面显示 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更快的页面显示</h3>\n<p>项目在构建时就能生成对应路由的静态页面，用户访问网页就能提前触发<code class=\"language-text\">DomContentLoaded</code>事件并渲染页面。这个在后面的一篇文章<a href=\"/blog/ssr-xiang-guan-wen-da/\">《SSR 相关》</a>有介绍。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAFA3PEY8MlBGQUZaVVBfeMiCeG5uePWvuZHI////////////////////////////////////////////////////2wBDAVVaWnhpeOuCguv/////////////////////////////////////////////////////////////////////////wgARCAALABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFMikj/xAAXEAADAQAAAAAAAAAAAAAAAAACEBEg/9oACAEBAAEFAiUx/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAgIDAAAAAAAAAAAAAAAAABEBEEFRYf/aAAgBAQABPyFXAuUwOd1//9oADAMBAAIAAwAAABAQD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQABBQADAAAAAAAAAAAAAAEAETFBUWFxgZH/2gAIAQEAAT8QIpBaxBZo9SjYeZt2dn2KuWf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SSR juejin\"\n        title=\"SSR juejin\"\n        src=\"/blog/static/f4ba33008c16b3914bd880d93a7c13bd/17354/SSR-juejin.jpg\"\n        srcset=\"/blog/static/f4ba33008c16b3914bd880d93a7c13bd/58c35/SSR-juejin.jpg 210w,\n/blog/static/f4ba33008c16b3914bd880d93a7c13bd/0d24e/SSR-juejin.jpg 420w,\n/blog/static/f4ba33008c16b3914bd880d93a7c13bd/17354/SSR-juejin.jpg 840w,\n/blog/static/f4ba33008c16b3914bd880d93a7c13bd/61048/SSR-juejin.jpg 1024w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"更方便的部署\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E6%96%B9%E4%BE%BF%E7%9A%84%E9%83%A8%E7%BD%B2\" aria-label=\"更方便的部署 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更方便的部署</h3>\n<p>前端项目骨架都静态化，因此资源可以走 CDN，这个没什么好说的。页面动态部分通过接口获取，可以使用 RESTAPI 也可以是 GraphQL。这样相对于传统的网页项目来说，静态化的方案可以大大节省服务器的资源。</p>\n<h3 id=\"解决方案成熟\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%88%90%E7%86%9F\" aria-label=\"解决方案成熟 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决方案成熟</h3>\n<p><strong>1. React -> Gatsby</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 775px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACE0lEQVQ4y3VUyW4TQRD1//8BcEfcuHCJkODEASFxSSISyYeExQErxLN4eu9+VFV3jSdDMlbZ4+pXr2t53ZtSCqoBOWey0iyBXMD+C3D5EuXiFcqfr8jkKoTjmJyW+MqziSHB2QBrgjgTgWJMCD7C+QKzu4bbvkf+8RG5u0GIgCe8I7ySckzwCcy14T/d/YSbb3uMnSVw5LwENB4Mvm973O0CjANtQNmVjIH8P7f3GB4MpsEhuCTVMalkyNnxYv8wwbsgGXoXBZAS7xxoIy9rgSsi/NgZdH8nmKOXaqoRYa2/9oQ//J6kN3kuJ0b+LbNP+8WPxCeNoR7KQinzwuMmZwkqV6/FKsEC0/AyPaFhQnZQXKYMuMylcTskEbMD7J28J8p2jWOfEOZGWNouTMp90P7x9Pn58PYKZ28uaoapZqYYxVdSzbCxr0l14p/PrvHp3WUjrNmkZ0hlys+R1ilnmj7J4zCQP0rZiluSaos2Gvg0KYFJyb7JguW0xinpTMhfusv/pFl0ZkYnAj6S9risp3CnDBvhknRpkTKzJhIxnZajO01/gUGbvhCKoJtQZ8HOF0YTb3BiRYW8wFVD1StPeRboStQiYC4nerpp6LY5f7FaL49OyXxSZom4KGd6Gr3YsXfSv9+3B9yeb8X2v3rxKYbN2ZPAgw5FJ10PvRWy4WAx9lYujaEjf1/XdJ2N35lQ45nrH8gEMgvJ7lWKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby\"\n        title=\"gatsby\"\n        src=\"/blog/static/066d0f4484f98775350d61a0584ca603/ae83b/gatsby.png\"\n        srcset=\"/blog/static/066d0f4484f98775350d61a0584ca603/e1650/gatsby.png 210w,\n/blog/static/066d0f4484f98775350d61a0584ca603/8cae7/gatsby.png 420w,\n/blog/static/066d0f4484f98775350d61a0584ca603/ae83b/gatsby.png 775w\"\n        sizes=\"(max-width: 775px) 100vw, 775px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><strong>2. Vue -> Nuxt</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABs0lEQVQoz41Tz0sCURD2n+hvqEv9DV07dLZDUoegIDoUlFARBEIQQRgIIdGlS4eoQ3TIDhVBRQcTDAwqZatdXfeHqz7ddX99PVfXdFNy2OG9mfd2Zr5v5vlAxbZttK+utPt7qfc/n7uxmk6OyNhOnOFLzndN4hXvuc/NZFqW4winLjAYmcVYcAlSpeT4qqoKXddhmiZUVUOtpkOUFeozuldo2Y1gz0IaIyeLGJrwY2B4FKtHUVimhcvre8Ru7lEmFVzdPiDx8oqneNKx/wSsG27AU+YRK7FDrIX2ENzcxcZBFCJR8M3yiCdTyDDfeEszYLM8ZKUIq4nqD2Q4XzOL/ntomTYKRQJSUWEYJpRSY18mKjRN72hYB2TXoVFuPhgO7xkOOV5GXqDVcSK4nEQ5K0GQirQ6iaqIvKj0DujlgahVlKnW1xptBqlUW1qivGlarecEtCp0x4aVRATCIczt72A6soXzmzv4Z5YxtbCOwPwqxicXEDk8blBCOfy3Qt00wORzyPBZMEIORUJoM1ikaUMynyyl45NCL3SF2xGwnyHu566v2zOrj5Grjk2htav3SbbLD2JojAqkN9oQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ssr nuxt\"\n        title=\"ssr nuxt\"\n        src=\"/blog/static/e086affc2033c78f88bff4a9b88e56ea/f88f5/ssr-nuxt.png\"\n        srcset=\"/blog/static/e086affc2033c78f88bff4a9b88e56ea/e1650/ssr-nuxt.png 210w,\n/blog/static/e086affc2033c78f88bff4a9b88e56ea/8cae7/ssr-nuxt.png 420w,\n/blog/static/e086affc2033c78f88bff4a9b88e56ea/f88f5/ssr-nuxt.png 840w,\n/blog/static/e086affc2033c78f88bff4a9b88e56ea/61546/ssr-nuxt.png 982w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/blog/2017-09-13-why-is-gatsby-so-fast/\" target=\"_target\" rel=\"nofollow\">Web Performance 101—also, why is Gatsby so fast?</a></li>\n<li><a href=\"https://www.gatsbyjs.org/\" target=\"_target\" rel=\"nofollow\">Gatsby</a></li>\n<li><a href=\"https://zh.nuxtjs.org/\" target=\"_target\" rel=\"nofollow\">Nuxtjs</a></li>\n</ul>","timeToRead":1,"wordCount":{"paragraphs":13,"sentences":13,"words":45},"fields":{"slug":"/wu-fu-wu-duan-de/","relativePath":"2018/2018-03-22---wu-fu-wu-duan-de/index.md"},"excerpt":"这里介绍的不是 SPA 和 PWA。 我觉得这可能是未来前后端分离的新方式，因为： 更快的页面显示 项目在构建时就能生成对应路由的静态页面，用户访问网页就能提前触发事件并渲染页面。这个在后面的一篇文章《SSR…","frontmatter":{"title":"无服务端的自动静态化Web应用","date":"22 Mar 2018","tags":["静态化"],"cover":"","comments":true,"author":"烈风裘"}}},"pageContext":{"curr":"/di-er-shi-er-zhang/","prev":"/wu-fu-wu-duan-de/","next":"/di-er-shi-yi-zhang/"}},"staticQueryHashes":["3240721340","63159454"]}