{"componentChunkName":"component---src-templates-blog-post-js","path":"/RESTful-she-ji/","result":{"data":{"site":{"siteMetadata":{"title":"Attila","cover":"/background/1.jpg","description":"Thoughts, stories and ideas.","keywords":["烈风裘的博客","X-Blog","Attila","Gatsby","前端成长记录"],"tagCover":"/background/5.jpg","archiveCover":"/background/escape-flight.png","siteUrl":"https://xiangst0816.github.io/blog","logo":"","navigation":true,"subscribe":true}},"allAuthorJson":{"totalCount":2,"edges":[{"node":{"id":"烈风裘","bio":"一往无前, 直到云开雾散!","avatar":"/avatar/avatar.png","cover":"/background/photo-1503197979108-c824168d51a8.jpeg","github":"https://github.com/xiangst0816","twitter":"","zhihu":"","weibo":"","facebook":"","website":"https://xiangst0816.github.io/blog/","location":"HangZhou, China"}},{"node":{"id":"WALL-E","bio":"还有要清理的吗?","avatar":"/avatar/cleaner.jpg","cover":"","github":null,"twitter":null,"zhihu":null,"weibo":null,"facebook":null,"website":null,"location":"Earth"}}]},"master":{"id":"烈风裘","bio":"一往无前, 直到云开雾散!","avatar":"/avatar/avatar.png","cover":"/background/photo-1503197979108-c824168d51a8.jpeg","github":"https://github.com/xiangst0816","twitter":"","zhihu":"","weibo":"","facebook":"","website":"https://xiangst0816.github.io/blog/","location":"HangZhou, China"},"currentPost":{"html":"<h2 id=\"restful-架构\" style=\"position:relative;\"><a href=\"#restful-%E6%9E%B6%E6%9E%84\" aria-label=\"restful 架构 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RESTful 架构</h2>\n<p>REST 是 Representational State Transfer 的缩写，表示“表现层状态转移”。这个其实是在讲一个过程。</p>\n<p>很久之前，用户访问服务器的时候，服务器是主角。他根据用户的请求决定发送设么东西给客户端，而客户端只有接收的“命”；</p>\n<p>现在 REST 来了，主角现在是用户，用户通过 HTTP 协议中的多种请求状态（GET、POST、PUT、DELETE 等），要求服务器按照 URL 中的参数将资源返回。这时服务器就像一个静态的资源服务器一样，每一个 URI 代表一种资源。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">RESRful：\n资源 = URI + Method\n\nMethod：\nGET用来获取资源\nPOST用来新建资源（也可以用于更新资源）\nPUT用来更新资源\nDELETE用来删除资源</code></pre></div>\n<p>因此，操作资源的动作只能由 GET、POST、PUT、DELETE 等进行，URI 代表资源的名称，故设计 URI 时尽量使用名词！</p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"http://www.ruanyifeng.com/blog/2014/05/restful_api.html\" target=\"_target\" rel=\"nofollow\">RESTful API 设计指南</a></li>\n</ul>","timeToRead":1,"wordCount":{"paragraphs":7,"sentences":7,"words":52},"fields":{"slug":"/RESTful-she-ji/","relativePath":"2016/2016-10-17---RESTful-she-ji/index.md"},"excerpt":"RESTful 架构 REST 是 Representational State Transfer…","frontmatter":{"title":"RESTful设计","date":"17 Oct 2016","tags":["RESTful"],"cover":"","comments":true,"author":"烈风裘"}},"nextPost":{"html":"<p>WebP 是一种图片压缩格式，主要应用在网络中传输图片，减小带宽及存储空间。在相同的精细度的情况下，WebP 拥有更小的文件尺寸，其在 Google 的产品中广为应用。</p>\n<h3 id=\"使用场景\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF\" aria-label=\"使用场景 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用场景</h3>\n<ol>\n<li>桌面浏览器： 谷歌浏览器能完全展示，但是 Firefox 不行</li>\n<li>手机浏览器：完全不行，例如 IOS 的 Safari 及微信浏览器</li>\n<li>APP：Android 和 IOS 图片展示需要专门的解析库</li>\n</ol>\n<h3 id=\"app-中使用特性\" style=\"position:relative;\"><a href=\"#app-%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%89%B9%E6%80%A7\" aria-label=\"app 中使用特性 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APP 中使用特性</h3>\n<h4 id=\"解析性能\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E6%9E%90%E6%80%A7%E8%83%BD\" aria-label=\"解析性能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解析性能</h4>\n<p>其中解码时间，WebP 的解码时间是 PNG 格式的 4.4 ~ 5 倍，流畅度、CPU 使用时间、内存占用无明显差异</p>\n<h4 id=\"最优方案\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E4%BC%98%E6%96%B9%E6%A1%88\" aria-label=\"最优方案 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最优方案</h4>\n<ul>\n<li>图片规格</li>\n</ul>\n<p>可以考虑使用 16n*16n 的规格，例如 256*256 或者 192*192 能获得更高的 WebP 压缩效率。</p>\n<ul>\n<li>色彩数</li>\n</ul>\n<p>建议原创表情尽量控制颜色数在 256 色以内，采用无损压缩性价比最高。</p>\n<ul>\n<li>色温、渐变与杂色、直线与直线、描边</li>\n</ul>\n<p>用色少，颜色渐变合理，装饰元素少，画面简单的</p>\n<h3 id=\"总结\" style=\"position:relative;\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h3>\n<p>谨慎使用！！</p>\n<h3 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h3>\n<ul>\n<li><a href=\"http://isux.tencent.com/introduction-of-webp.html\" target=\"_target\" rel=\"nofollow\">WebP 探寻之路</a></li>\n</ul>","timeToRead":1,"wordCount":{"paragraphs":19,"sentences":19,"words":76},"fields":{"slug":"/webp/","relativePath":"2016/2016-10-17---webp/index.md"},"excerpt":"WebP 是一种图片压缩格式，主要应用在网络中传输图片，减小带宽及存储空间。在相同的精细度的情况下，WebP 拥有更小的文件尺寸，其在 Google…","frontmatter":{"title":"webp","date":"17 Oct 2016","tags":["WebP"],"cover":"","comments":true,"author":"烈风裘"}},"prevPost":{"html":"<blockquote>\n<p>前言介绍，因为在给网站升级 https，其中涉及到修改文件内容等操作，于是阴差阳错的将/etc 文件全部<code class=\"language-text\">chmod 777</code>了，结果导致阿里云服务器远程 SSH 无法登录及 FTP 也无法使用。</p>\n<p>更悲催的是，我之前都没做过数据库镜像备份及数据库备份，想着应该不会发生，结果还是发生了。从客服了解到，只能重置服务器，让我将‘受伤’的系统盘做一个镜像。等新系统初始化完毕之后挂载镜像再做修复。</p>\n<p>于是，就有了这边文章的起源。从零开始部署+修复数据。不过，没想象的难。</p>\n</blockquote>\n<h2 id=\"mevn\" style=\"position:relative;\"><a href=\"#mevn\" aria-label=\"mevn permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MEVN</h2>\n<p>这个单词是 Mongodb、Express、Vue、Nodejs 全栈技术的缩写，和 MEAN 很像，其中 Vue 也是 MVVM 框架，因此改动不算大。</p>\n<h2 id=\"阿里云服务器\" style=\"position:relative;\"><a href=\"#%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8\" aria-label=\"阿里云服务器 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>阿里云服务器</h2>\n<p>购买了阿里云的包年的服务器，选择 CentOS+Nginx+Nodejs 的环境配置之后拿到手的就是原始的服务器环境。</p>\n<h2 id=\"ssh-登录\" style=\"position:relative;\"><a href=\"#ssh-%E7%99%BB%E5%BD%95\" aria-label=\"ssh 登录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH 登录</h2>\n<p>Mac 使用起来还是挺方便的，在终端中输入命令及密码：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ssh -p 22 root@xxx.xxx.xxx.xxx\n$ password</code></pre></div>\n<h2 id=\"nodejs-升级\" style=\"position:relative;\"><a href=\"#nodejs-%E5%8D%87%E7%BA%A7\" aria-label=\"nodejs 升级 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nodejs 升级</h2>\n<p>升级 Nodejs 是为了使用 ES6 的语法写后台应用，首次尝试了使用 YUM 安装：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ yum insalll -y nodejs</code></pre></div>\n<p>这个命令安装的是 0.10 版本，但是现在 Node 最新版本已经是 6.8.1 了，故需要换一个方法。先下载最新版本，之后再安装。<a href=\"http://jingyan.baidu.com/article/dca1fa6f48f478f1a5405272.html\" target=\"_target\" rel=\"nofollow\">参考这里</a>。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ curl --silent --location https://rpm.nodesource.com/setup_6.x | bash -\n$ yum install -y nodejs</code></pre></div>\n<p>之后是安装 npm 包管理器、n 命令（nodejs 版本管理工具）、cnpm、pm2</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$  yun install -y npm\n$ npm install n -g\n$ npm install cnpm -g\n$ cnpm install pm2 -g</code></pre></div>\n<h2 id=\"挂载原来的镜像文件\" style=\"position:relative;\"><a href=\"#%E6%8C%82%E8%BD%BD%E5%8E%9F%E6%9D%A5%E7%9A%84%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6\" aria-label=\"挂载原来的镜像文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>挂载原来的镜像文件</h2>\n<p>邀请了阿里云的客服帮我把以前的服务器镜像挂载到了<code class=\"language-text\">/dev/vdb1</code>下，通过下面的的命令打开镜像，很是很简单。镜像在<code class=\"language-text\">/alidata/disk_bk</code>下显示。之后就可以 cd 进去了。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ mount -o loop /dev/vdb1 /alidata/disk_bk</code></pre></div>\n<p>解挂命令(当前在/alidata 下)：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ umount disk_bk/\n\n$ lsof | grpe disk_bk //如果解挂不行，查询当前那个进程在使用，然后\n$ kill -9 pid</code></pre></div>\n<p>使用<code class=\"language-text\">mv</code>命令将以前的资料导出到新环境中，包括部署前端文件及数据库。</p>\n<h2 id=\"nginx\" style=\"position:relative;\"><a href=\"#nginx\" aria-label=\"nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx</h2>\n<p>我只是修改了转发端口，之前是代理 8088，我改成了我的 8080.</p>\n<p>配置文件：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">/alidata/server/nginx/conf/vhosts</code></pre></div>\n<p>进入目录后重启服务：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd /alidata/server/nginx/sbin\n$ ./nginx -s reload</code></pre></div>\n<h2 id=\"mongodb\" style=\"position:relative;\"><a href=\"#mongodb\" aria-label=\"mongodb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mongodb</h2>\n<h3 id=\"关闭以前的-mongod-服务\" style=\"position:relative;\"><a href=\"#%E5%85%B3%E9%97%AD%E4%BB%A5%E5%89%8D%E7%9A%84-mongod-%E6%9C%8D%E5%8A%A1\" aria-label=\"关闭以前的 mongod 服务 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>关闭以前的 mongod 服务</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ mongod --shutdown //不行使用下面的\n\n$  lsof | grep 27017  //找占用27017端口的进程，然后kill，一般都这么搞\n$  kill pid</code></pre></div>\n<h3 id=\"启动-mongod-服务，指向最新数据库\" style=\"position:relative;\"><a href=\"#%E5%90%AF%E5%8A%A8-mongod-%E6%9C%8D%E5%8A%A1%EF%BC%8C%E6%8C%87%E5%90%91%E6%9C%80%E6%96%B0%E6%95%B0%E6%8D%AE%E5%BA%93\" aria-label=\"启动 mongod 服务，指向最新数据库 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启动 mongod 服务，指向最新数据库</h3>\n<h4 id=\"mongod-以守护进程的方式启动\" style=\"position:relative;\"><a href=\"#mongod-%E4%BB%A5%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8\" aria-label=\"mongod 以守护进程的方式启动 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mongod 以守护进程的方式启动</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mongod --dbpath=/data/db --port=27017 --fork --logpath=/alidata/log/mongod/mongod.log</code></pre></div>\n<h4 id=\"查看日志是否错误\" style=\"position:relative;\"><a href=\"#%E6%9F%A5%E7%9C%8B%E6%97%A5%E5%BF%97%E6%98%AF%E5%90%A6%E9%94%99%E8%AF%AF\" aria-label=\"查看日志是否错误 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>查看日志是否错误</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">tail -f /var/log/mongd.log //查看日志文件（cat也行）</code></pre></div>\n<h2 id=\"启动应用\" style=\"position:relative;\"><a href=\"#%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8\" aria-label=\"启动应用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启动应用</h2>\n<p>安装各种依赖</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cnpn install</code></pre></div>\n<p>然后就能启动了，然后查看输出是否有问题。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd /home/x-songtao\n$ pm2 start ./bin/www -n x-songtao -i max;pm2 logs</code></pre></div>\n<p>最后，<a href=\"xiangsongtao.com\">访问试试看</a>，噢耶！</p>\n<p>(完)</p>","timeToRead":4,"wordCount":{"paragraphs":31,"sentences":31,"words":131},"fields":{"slug":"/cong-zong-ling-kai-shi-MEVN-huan-jing/","relativePath":"2016/2016-10-18---cong-zong-ling-kai-shi-MEVN-huan-jing/index.md"},"excerpt":"前言介绍，因为在给网站升级 https，其中涉及到修改文件内容等操作，于是阴差阳错的将/etc 文件全部了，结果导致阿里云服务器远程 SSH 无法登录及 FTP…","frontmatter":{"title":"从零开始MEVN环境部署","date":"18 Oct 2016","tags":["MEVN"],"cover":"","comments":true,"author":"烈风裘"}}},"pageContext":{"curr":"/RESTful-she-ji/","prev":"/cong-zong-ling-kai-shi-MEVN-huan-jing/","next":"/webp/"}},"staticQueryHashes":["3240721340","63159454"]}