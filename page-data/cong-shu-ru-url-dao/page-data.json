{"componentChunkName":"component---src-templates-blog-post-js","path":"/cong-shu-ru-url-dao/","result":{"data":{"site":{"siteMetadata":{"title":"Attila","cover":"/background/1.jpg","description":"Thoughts, stories and ideas.","keywords":["烈风裘的博客","X-Blog","Attila","Gatsby","前端成长记录"],"tagCover":"/background/5.jpg","archiveCover":"/background/escape-flight.png","siteUrl":"https://xiangst0816.github.io/blog","logo":"","navigation":true,"subscribe":true}},"allAuthorJson":{"totalCount":2,"edges":[{"node":{"id":"烈风裘","bio":"一往无前, 直到云开雾散!","avatar":"/avatar/me.jpeg","cover":"/background/photo-1503197979108-c824168d51a8.jpeg","github":"https://github.com/xiangst0816","twitter":"","zhihu":"","weibo":"","facebook":"","website":"https://xiangst0816.github.io/blog/","location":"HangZhou, China"}},{"node":{"id":"WALL-E","bio":"还有要清理的吗?","avatar":"/avatar/cleaner.jpg","cover":"","github":null,"twitter":null,"zhihu":null,"weibo":null,"facebook":null,"website":null,"location":"Earth"}}]},"master":{"id":"烈风裘","bio":"一往无前, 直到云开雾散!","avatar":"/avatar/me.jpeg","cover":"/background/photo-1503197979108-c824168d51a8.jpeg","github":"https://github.com/xiangst0816","twitter":"","zhihu":"","weibo":"","facebook":"","website":"https://xiangst0816.github.io/blog/","location":"HangZhou, China"},"currentPost":{"html":"<blockquote>\n<p>占坑，内容会陆续补齐</p>\n</blockquote>\n<h3 id=\"1-url-ip\" style=\"position:relative;\"><a href=\"#1-url-ip\" aria-label=\"1 url ip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. URL->IP</h3>\n<p>将输入的域名转化为真实的 IP 地址，这里涉及到 DNS 层层向外查找等内容。</p>\n<h3 id=\"2-ip-http\" style=\"position:relative;\"><a href=\"#2-ip-http\" aria-label=\"2 ip http permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. IP->HTTP</h3>\n<p>拿到远端的 IP 地址，浏览器向服务器发送 HTTP 请求，包括相应的请求头</p>\n<h3 id=\"3-http-tcp\" style=\"position:relative;\"><a href=\"#3-http-tcp\" aria-label=\"3 http tcp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. HTTP->TCP</h3>\n<h3 id=\"4-服务端部分\" style=\"position:relative;\"><a href=\"#4-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%83%A8%E5%88%86\" aria-label=\"4 服务端部分 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 服务端部分</h3>\n<h4 id=\"41-负载均衡\" style=\"position:relative;\"><a href=\"#41-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1\" aria-label=\"41 负载均衡 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 负载均衡</h4>\n<h3 id=\"5-浏览器接收数据\" style=\"position:relative;\"><a href=\"#5-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE\" aria-label=\"5 浏览器接收数据 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 浏览器接收数据</h3>\n<h3 id=\"6-浏览器解析-html-流程\" style=\"position:relative;\"><a href=\"#6-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%A7%A3%E6%9E%90-html-%E6%B5%81%E7%A8%8B\" aria-label=\"6 浏览器解析 html 流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 浏览器解析 HTML 流程</h3>\n<p>浏览器渲染过程，资源加载同步异步</p>\n<h3 id=\"7-浏览器资源加载过程\" style=\"position:relative;\"><a href=\"#7-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B\" aria-label=\"7 浏览器资源加载过程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 浏览器资源加载过程</h3>\n<p>keep-alive、缓存、HTTP1.0、HTTP1.1、HTTPS、HTTP2.0</p>\n<h3 id=\"8-浏览器渲染过程\" style=\"position:relative;\"><a href=\"#8-%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B\" aria-label=\"8 浏览器渲染过程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 浏览器渲染过程</h3>\n<h3 id=\"9-渲染过程各个阶段及事件\" style=\"position:relative;\"><a href=\"#9-%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B%E5%90%84%E4%B8%AA%E9%98%B6%E6%AE%B5%E5%8F%8A%E4%BA%8B%E4%BB%B6\" aria-label=\"9 渲染过程各个阶段及事件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. 渲染过程各个阶段及事件</h3>\n<h3 id=\"10-javascript-执行时机及流程\" style=\"position:relative;\"><a href=\"#10-javascript-%E6%89%A7%E8%A1%8C%E6%97%B6%E6%9C%BA%E5%8F%8A%E6%B5%81%E7%A8%8B\" aria-label=\"10 javascript 执行时机及流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. JavaScript 执行时机及流程</h3>\n<p>JS 加载阻塞 HTML 解析，建议在 DOMContentLoaded 事件后操作 DOM。</p>\n<h3 id=\"11-异步请求过程及跨域\" style=\"position:relative;\"><a href=\"#11-%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%E5%8F%8A%E8%B7%A8%E5%9F%9F\" aria-label=\"11 异步请求过程及跨域 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. 异步请求过程及跨域</h3>\n<p>XMLHTTPRequest、XDomainRequest、cookie 等</p>\n<h3 id=\"12-异步数据更新页面过程\" style=\"position:relative;\"><a href=\"#12-%E5%BC%82%E6%AD%A5%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0%E9%A1%B5%E9%9D%A2%E8%BF%87%E7%A8%8B\" aria-label=\"12 异步数据更新页面过程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. 异步数据更新页面过程</h3>\n<p>Layout->Paint->Composite</p>","timeToRead":3,"wordCount":{"paragraphs":21,"sentences":21,"words":70},"fields":{"slug":"/cong-shu-ru-url-dao/","relativePath":"2018/2018-03-22---cong-shu-ru-url-dao/index.md"},"excerpt":"占坑，内容会陆续补齐 1. URL->IP 将输入的域名转化为真实的 IP 地址，这里涉及到 DNS 层层向外查找等内容。 2. IP->HTTP 拿到远端的 IP 地址，浏览器向服务器发送 HTTP…","frontmatter":{"title":"从输入URL到页面显示过程中发生的事儿","date":"22 Mar 2018","tags":["随笔"],"cover":"","comments":true,"author":"烈风裘"}},"nextPost":{"html":"<blockquote>\n<p>这里介绍的不是 SPA 和 PWA。</p>\n</blockquote>\n<p>我觉得这可能是未来<strong>前后端分离的新方式</strong>，因为：</p>\n<h3 id=\"更快的页面显示\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E5%BF%AB%E7%9A%84%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA\" aria-label=\"更快的页面显示 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更快的页面显示</h3>\n<p>项目在构建时就能生成对应路由的静态页面，用户访问网页就能提前触发<code class=\"language-text\">DomContentLoaded</code>事件并渲染页面。这个在后面的一篇文章<a href=\"/blog/ssr-xiang-guan-wen-da/\">《SSR 相关》</a>有介绍。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAFA3PEY8MlBGQUZaVVBfeMiCeG5uePWvuZHI////////////////////////////////////////////////////2wBDAVVaWnhpeOuCguv/////////////////////////////////////////////////////////////////////////wgARCAALABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFMikj/xAAXEAADAQAAAAAAAAAAAAAAAAACEBEg/9oACAEBAAEFAiUx/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhAAAgIDAAAAAAAAAAAAAAAAABEBEEFRYf/aAAgBAQABPyFXAuUwOd1//9oADAMBAAIAAwAAABAQD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQABBQADAAAAAAAAAAAAAAEAETFBUWFxgZH/2gAIAQEAAT8QIpBaxBZo9SjYeZt2dn2KuWf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"SSR juejin\"\n        title=\"SSR juejin\"\n        src=\"/blog/static/f4ba33008c16b3914bd880d93a7c13bd/17354/SSR-juejin.jpg\"\n        srcset=\"/blog/static/f4ba33008c16b3914bd880d93a7c13bd/58c35/SSR-juejin.jpg 210w,\n/blog/static/f4ba33008c16b3914bd880d93a7c13bd/0d24e/SSR-juejin.jpg 420w,\n/blog/static/f4ba33008c16b3914bd880d93a7c13bd/17354/SSR-juejin.jpg 840w,\n/blog/static/f4ba33008c16b3914bd880d93a7c13bd/61048/SSR-juejin.jpg 1024w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h3 id=\"更方便的部署\" style=\"position:relative;\"><a href=\"#%E6%9B%B4%E6%96%B9%E4%BE%BF%E7%9A%84%E9%83%A8%E7%BD%B2\" aria-label=\"更方便的部署 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>更方便的部署</h3>\n<p>前端项目骨架都静态化，因此资源可以走 CDN，这个没什么好说的。页面动态部分通过接口获取，可以使用 RESTAPI 也可以是 GraphQL。这样相对于传统的网页项目来说，静态化的方案可以大大节省服务器的资源。</p>\n<h3 id=\"解决方案成熟\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%88%90%E7%86%9F\" aria-label=\"解决方案成熟 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决方案成熟</h3>\n<p><strong>1. React -> Gatsby</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 775px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACE0lEQVQ4y3VUyW4TQRD1//8BcEfcuHCJkODEASFxSSISyYeExQErxLN4eu9+VFV3jSdDMlbZ4+pXr2t53ZtSCqoBOWey0iyBXMD+C3D5EuXiFcqfr8jkKoTjmJyW+MqziSHB2QBrgjgTgWJMCD7C+QKzu4bbvkf+8RG5u0GIgCe8I7ySckzwCcy14T/d/YSbb3uMnSVw5LwENB4Mvm973O0CjANtQNmVjIH8P7f3GB4MpsEhuCTVMalkyNnxYv8wwbsgGXoXBZAS7xxoIy9rgSsi/NgZdH8nmKOXaqoRYa2/9oQ//J6kN3kuJ0b+LbNP+8WPxCeNoR7KQinzwuMmZwkqV6/FKsEC0/AyPaFhQnZQXKYMuMylcTskEbMD7J28J8p2jWOfEOZGWNouTMp90P7x9Pn58PYKZ28uaoapZqYYxVdSzbCxr0l14p/PrvHp3WUjrNmkZ0hlys+R1ilnmj7J4zCQP0rZiluSaos2Gvg0KYFJyb7JguW0xinpTMhfusv/pFl0ZkYnAj6S9risp3CnDBvhknRpkTKzJhIxnZajO01/gUGbvhCKoJtQZ8HOF0YTb3BiRYW8wFVD1StPeRboStQiYC4nerpp6LY5f7FaL49OyXxSZom4KGd6Gr3YsXfSv9+3B9yeb8X2v3rxKYbN2ZPAgw5FJ10PvRWy4WAx9lYujaEjf1/XdJ2N35lQ45nrH8gEMgvJ7lWKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby\"\n        title=\"gatsby\"\n        src=\"/blog/static/066d0f4484f98775350d61a0584ca603/ae83b/gatsby.png\"\n        srcset=\"/blog/static/066d0f4484f98775350d61a0584ca603/e1650/gatsby.png 210w,\n/blog/static/066d0f4484f98775350d61a0584ca603/8cae7/gatsby.png 420w,\n/blog/static/066d0f4484f98775350d61a0584ca603/ae83b/gatsby.png 775w\"\n        sizes=\"(max-width: 775px) 100vw, 775px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><strong>2. Vue -> Nuxt</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABs0lEQVQoz41Tz0sCURD2n+hvqEv9DV07dLZDUoegIDoUlFARBEIQQRgIIdGlS4eoQ3TIDhVBRQcTDAwqZatdXfeHqz7ddX99PVfXdFNy2OG9mfd2Zr5v5vlAxbZttK+utPt7qfc/n7uxmk6OyNhOnOFLzndN4hXvuc/NZFqW4winLjAYmcVYcAlSpeT4qqoKXddhmiZUVUOtpkOUFeozuldo2Y1gz0IaIyeLGJrwY2B4FKtHUVimhcvre8Ru7lEmFVzdPiDx8oqneNKx/wSsG27AU+YRK7FDrIX2ENzcxcZBFCJR8M3yiCdTyDDfeEszYLM8ZKUIq4nqD2Q4XzOL/ntomTYKRQJSUWEYJpRSY18mKjRN72hYB2TXoVFuPhgO7xkOOV5GXqDVcSK4nEQ5K0GQirQ6iaqIvKj0DujlgahVlKnW1xptBqlUW1qivGlarecEtCp0x4aVRATCIczt72A6soXzmzv4Z5YxtbCOwPwqxicXEDk8blBCOfy3Qt00wORzyPBZMEIORUJoM1ikaUMynyyl45NCL3SF2xGwnyHu566v2zOrj5Grjk2htav3SbbLD2JojAqkN9oQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ssr nuxt\"\n        title=\"ssr nuxt\"\n        src=\"/blog/static/e086affc2033c78f88bff4a9b88e56ea/f88f5/ssr-nuxt.png\"\n        srcset=\"/blog/static/e086affc2033c78f88bff4a9b88e56ea/e1650/ssr-nuxt.png 210w,\n/blog/static/e086affc2033c78f88bff4a9b88e56ea/8cae7/ssr-nuxt.png 420w,\n/blog/static/e086affc2033c78f88bff4a9b88e56ea/f88f5/ssr-nuxt.png 840w,\n/blog/static/e086affc2033c78f88bff4a9b88e56ea/61546/ssr-nuxt.png 982w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://www.gatsbyjs.org/blog/2017-09-13-why-is-gatsby-so-fast/\" target=\"_target\" rel=\"nofollow\">Web Performance 101—also, why is Gatsby so fast?</a></li>\n<li><a href=\"https://www.gatsbyjs.org/\" target=\"_target\" rel=\"nofollow\">Gatsby</a></li>\n<li><a href=\"https://zh.nuxtjs.org/\" target=\"_target\" rel=\"nofollow\">Nuxtjs</a></li>\n</ul>","timeToRead":1,"wordCount":{"paragraphs":13,"sentences":13,"words":45},"fields":{"slug":"/wu-fu-wu-duan-de/","relativePath":"2018/2018-03-22---wu-fu-wu-duan-de/index.md"},"excerpt":"这里介绍的不是 SPA 和 PWA。 我觉得这可能是未来前后端分离的新方式，因为： 更快的页面显示 项目在构建时就能生成对应路由的静态页面，用户访问网页就能提前触发事件并渲染页面。这个在后面的一篇文章《SSR…","frontmatter":{"title":"无服务端的自动静态化Web应用","date":"22 Mar 2018","tags":["静态化"],"cover":"","comments":true,"author":"烈风裘"}},"prevPost":{"html":"<blockquote>\n<p>这里所指都是在浏览器环境中，而不是 Nodejs 环境。</p>\n</blockquote>\n<h2 id=\"js-异步机制\" style=\"position:relative;\"><a href=\"#js-%E5%BC%82%E6%AD%A5%E6%9C%BA%E5%88%B6\" aria-label=\"js 异步机制 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JS 异步机制</h2>\n<blockquote>\n<p>关于 JS 简要的运行机制及事件队列等知识<strong>强烈</strong>希望能翻墙看下这个视频：<a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\" target=\"_target\" rel=\"nofollow\">地址</a>。</p>\n</blockquote>\n<p>这里有个很重要的图需要深刻理解：</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.19047619047619%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACJElEQVQoz21STW/TQBDN3+KKUIXgUnHgX8CVQ6VegAMS4lJKUQ9QDhw4ViKIgrggQJQkTQOUKCEf5KP5cBzXXnvtXa/tx+y6DQ1gabSjGb+3b+dNoXRYQrVWQeloH5trN1F8tIZa/QDlahnv9/fwufwWFepXDr8solzNo0LY0ulZ/VomnjIKgWCI0xBh4uPZjy20Bs+hEg4F4Ki5g05vl/IMUcwgqS7ojJMAKuWQykcoGfUC09NRCKWPBIJ+EEizEClixJnAzBnDZRPY7hizk5H5WVEvpYuciGPkzCEp1xXd0xw6FoRapTAgAUm5T3UuA6oDQiUEVFBBH7N3d9Et3ka7eAfj1+vgnTeGVJEYlUU5YXqOMCeP0LEG6LtdsKCIufsCTEaYtj6iuXERjY0VNB5eRv3+BdifNgkDMwJDGMXLCpMsl24Pe/A8m56+jsHoBnwlwac1HD+5gp/bq6hvXcNw+xLcg6dm3sn/COVCIcfcphklAo73mEgf0FwjMsuDdBvwJt/BpnXEbhOCj83ME0TnCeUSoW6w8ARzz4JFhlhkUEJO66fpzxcCPOYm12RawBnuX4VUJN9I2YyILDisTU5/o16H1qNNq9IC4y1w4RsjNEZj/yJcVqiX4Xjaw3TO4Lj30O2toD9cpbiOX/2rmFi3SC/NDTnZGeHp2rA/pqjAnPomL7BJCa2OKFG+S/krij14/CX88ANdLsnEwGDMjmb5DH8DVRozD2fPyKoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Chrome中JS运行机制\"\n        title=\"Chrome中JS运行机制\"\n        src=\"/blog/static/81273561d5de2c2910bbea2112432038/f88f5/js-in-chrome.png\"\n        srcset=\"/blog/static/81273561d5de2c2910bbea2112432038/e1650/js-in-chrome.png 210w,\n/blog/static/81273561d5de2c2910bbea2112432038/8cae7/js-in-chrome.png 420w,\n/blog/static/81273561d5de2c2910bbea2112432038/f88f5/js-in-chrome.png 840w,\n/blog/static/81273561d5de2c2910bbea2112432038/a4e06/js-in-chrome.png 1023w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Chrome中JS运行机制</figcaption>\n  </figure></p>\n<ul>\n<li>Chrome 中的 V8 只处理 JS 的解析及执行（可能有歧义）</li>\n<li>JS 运行在单线程上，通过 event loop 完成异步调度</li>\n<li>DOM、XMLHTTPREquest、setTimeout、setInterval 等是异步的 WebAPIs</li>\n<li>异步代码会被推入 callback queue（Tasks）中，当 stack 空闲时挨个推入 stack</li>\n<li>PS: microtasks 稍后介绍</li>\n</ul>\n<p>这里是 Video 中关于执行一个异步操作时的图示：</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 840px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.19047619047619%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACJUlEQVQoz31SO2/TUBT2n2JGQkL8Aub+BUYWJNgYECoMTAUhdUAUQZSkSZMWBiTUoRBEUprGCAGJ49pxcm1f+/r9+Di+TlAZYPh8Hj73nO88lKc372Lv/g4674/Q6rax32+ie9hB/10P7d4+Wgdt9I+66JFv781LNFqv13aX4pvYfbGLRruB3tsD6VeWx9/h6wwJcsR5hLwMUSIDUBBy0iq9lHZBUZB2vvaVSBHTd2PnUHxyuKkPbbWEyRgsk2HFdFjODFw4EIlAVkRULEBWBkiLAAnZZvMW1AdXMHt0FYtX13BxvIU4sqF4kYcscRAKEwk9SsuYOIRUKyQ7RJgFxDqiZCkxLCVS0t3BM1jd27A6d+Ce3IPz8wnShEPRuAfNC6BxH1Obk7QwdXXMOYNO/mXgyVZs7xCGtQ2LPUYYf77UdD2cCikVVgzuQtUNzJiNhRAwfReG75DukS7AY18+Yu5D/Ph1HdrFDfhhk8ZA0yyou0LUkOMIoXB/heFoAGuly4GXcsiJlAW1XSCiwAQi+gDd3MHSfo4oPSNfTowCySorI5lMMqTdIs4EtZBQulj+zP4ERXKOlm1Qy7Q40wbjsWRcJbgcu4FS/WDuAroxhUtsqwKyWgVaUlWMC0asOOmeRJILWahaYo1aly1v7o0a+Ou+NogpaG7N1/dX/Af1fSqT0wFUwrevlfyEyaiGWsnhR5wTxl9OMD4f4mwy+ifG6ggT9RS/AV4BMhEAn1UeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JS运行时\"\n        title=\"JS运行时\"\n        src=\"/blog/static/5be09d41c91a9c861541a681bb601c7d/f88f5/js-run.png\"\n        srcset=\"/blog/static/5be09d41c91a9c861541a681bb601c7d/e1650/js-run.png 210w,\n/blog/static/5be09d41c91a9c861541a681bb601c7d/8cae7/js-run.png 420w,\n/blog/static/5be09d41c91a9c861541a681bb601c7d/f88f5/js-run.png 840w,\n/blog/static/5be09d41c91a9c861541a681bb601c7d/57a2b/js-run.png 1260w,\n/blog/static/5be09d41c91a9c861541a681bb601c7d/b5d14/js-run.png 1680w,\n/blog/static/5be09d41c91a9c861541a681bb601c7d/1bf6b/js-run.png 2561w\"\n        sizes=\"(max-width: 840px) 100vw, 840px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">JS运行时</figcaption>\n  </figure></p>\n<ul>\n<li>当浏览器开始执行我们的代码时，会将 Script 推入 Tasks 中（就是<code class=\"language-text\">&lt;script&gt;</code>中的代码）</li>\n<li>当 stack 为空，则 event loop 从 task queue 中取出一个任务执行</li>\n<li>运行代码打印<code class=\"language-text\">Hi</code></li>\n<li>遇到<code class=\"language-text\">setTimeout</code>时，将回调推入 webapis 管理（里面有一个定时队列）</li>\n<li>代码继续向下执行，输出<code class=\"language-text\">JSConfEU</code>，随后 stack 清空，<strong>UI 刷新</strong></li>\n<li>当定时时间到了，webapis 将回调推入 task queue 中，stack 此时为空，event loop 取一个任务推入 stack 执行</li>\n<li>代码输出<code class=\"language-text\">there</code></li>\n</ul>\n<p>以上就是 JS 的异步执行过程，<strong>Tasks</strong>就是上图中的 task queue，<strong>microtasks</strong>在下面介绍。</p>\n<h2 id=\"tasksmicrotasks-的区别\" style=\"position:relative;\"><a href=\"#tasksmicrotasks-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"tasksmicrotasks 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tasks/microtasks 的区别</h2>\n<p>Google Chrome 的开发者 Jake 对存在 microtasks 时的情况有篇博文介绍的很详细，<a href=\"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\" target=\"_target\" rel=\"nofollow\">地址</a>，建议精读。以下通过代码解读用于区别 Tasks 和 microtasks。</p>\n<h3 id=\"代码解读-1\" style=\"position:relative;\"><a href=\"#%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB-1\" aria-label=\"代码解读 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代码解读 1:</h3>\n<p>当<code class=\"language-text\">setTimeout</code>和<code class=\"language-text\">Promise</code>同时存在时，代码示例及执行顺序说明如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script start\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"setTimeout\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"promise1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"promise2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script end\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>下图中需要重点理解 Tasks、Microtasks、JS stack 这三个栈</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 681px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.38095238095238%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+UlEQVQ4y5XSXW/SUBgH8PNBJhdQoC0M2RjtCpSx0fImiNdG4AIvlAvDTBa/mFd4u2ySDUaQCPIy4kycLS1oYuLl39OSLHqhdBe/PCdtzvP8e04Jz/Nwu91gGAYej8euDOP9AwOv1+sYSaVSSCQSd2KxfUqERNlVkiAIIiU4QkqlEsrlMrLZLIrFIlQ1hUz2AIp6sK5KGslk8q+h/0OsBKnDIyjpNOKxOMQITbS7B0kUENwOwOdbf8r6KDYjIt1YzGWRowllWYZMp+xLISTkMEQpiEhkBxzHw+/3g2XZjWhDETsPt2FdjvWA4zi6maM1CNbPg2N5BPjA3ftNjYmVKpfLQ1UUZDIqXWdoOhH5goIjemExIQEpGoMQjSIUCtkDreb/QsLhMAr5AvUIsqQgGVfp4Uaxu+eDn/XYv9LWgy24XC5HSK1WQ7P5Gm9OmjhuPKEeo/nqKZrHL9BoPEe9XkelUkG1WnWEdC4v0OsN8GV+AXN8Av3jSyy/vsP3H7+wWpnUCsvl0jHS7XZxdnaOweADlsYNDEPDYmFC13VqQdf3Q66uOjh/f4nr8Slue8+gf34L3fiJhf7NcRNruKZpdiWdToemG2A+n0HXbmij23slspoYhmEfjWmaIMPhEKPRCJ/GY0yn15hMptTEsdlshn6/j1arhXa7jd8q+pKalcJ2dQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tasks microtasks\"\n        title=\"tasks microtasks\"\n        src=\"/blog/static/08b396c7fcd545e1bd2ccc198980df51/d868b/tasks-microtasks.png\"\n        srcset=\"/blog/static/08b396c7fcd545e1bd2ccc198980df51/e1650/tasks-microtasks.png 210w,\n/blog/static/08b396c7fcd545e1bd2ccc198980df51/8cae7/tasks-microtasks.png 420w,\n/blog/static/08b396c7fcd545e1bd2ccc198980df51/d868b/tasks-microtasks.png 681w\"\n        sizes=\"(max-width: 681px) 100vw, 681px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><strong>第一次 Task 执行：</strong></p>\n<ul>\n<li>将当前的 script 推入 Tasks 中</li>\n<li>执行第一段代码，输出<code class=\"language-text\">script start</code></li>\n<li>setTimout 回调推入 webapis 的定时栈中</li>\n<li>Promise 的第一个 then 回调推入 Microtasks</li>\n<li>执行最后一句输出<code class=\"language-text\">script end</code></li>\n<li><strong>检查 Microtasks 中是否有任务</strong></li>\n<li>执行推入的第一个 Promise 的 then 回调</li>\n<li>输出<code class=\"language-text\">promise1</code>，之后将第二个 then 回调推入 Microtasks</li>\n<li>检查 Microtasks 中是否有任务</li>\n<li>执行推入的第二个 Promise 的 then 回调</li>\n<li>输出<code class=\"language-text\">promise2</code></li>\n<li>第一个 Tasks 执行完毕，<strong>刷新 UI</strong></li>\n</ul>\n<p><strong>第二次 Task 执行：</strong></p>\n<ul>\n<li>webapis 根据定时将 setTimeout 回调推入 Tasks 中</li>\n<li>Event loop 从 Tasks 取出任务执行</li>\n<li>输出<code class=\"language-text\">setTimeout</code></li>\n<li><strong>检查 Microtasks 中没有任务</strong></li>\n<li>当前 Task 执行完毕，<strong>刷新 UI</strong></li>\n</ul>\n<h4 id=\"tasks-和-microtasks-所涉及的-api：\" style=\"position:relative;\"><a href=\"#tasks-%E5%92%8C-microtasks-%E6%89%80%E6%B6%89%E5%8F%8A%E7%9A%84-api%EF%BC%9A\" aria-label=\"tasks 和 microtasks 所涉及的 api： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tasks 和 microtasks 所涉及的 API：</h4>\n<ul>\n<li><strong>Tasks</strong>: setTimeout, setInterval, (setImmediate, I/O,) UI rendering</li>\n<li><strong>microtasks</strong>: (process.nextTick,) Promise, MutationObserver</li>\n</ul>\n<h4 id=\"需要注意的地方：\" style=\"position:relative;\"><a href=\"#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9%EF%BC%9A\" aria-label=\"需要注意的地方： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>需要注意的地方：</h4>\n<ul>\n<li>microtasks 不是 webapis，他的优先级比 Tasks 高，每轮主流任务执行完毕都会检查 microtasks，检查完毕后这轮 Task 才结束</li>\n<li>micrtasks 为 js 逻辑的一部分，不涉及到 UI 等 web 功能，因此功能上应该和 setTimeout 等 webapis 作区分</li>\n<li><strong>每轮 Task 结束都会渲染 UI，为了防止 UI 卡死</strong></li>\n<li>setTimeout 由 webapis 管理，当定时时间到了，就推入 Tasks 中等待执行（不是立即执行）</li>\n<li>setTimeout 最短执行时间为 4ms，即使定时时间为 0</li>\n</ul>\n<h3 id=\"代码解读-2\" style=\"position:relative;\"><a href=\"#%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB-2\" aria-label=\"代码解读 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代码解读 2</h3>\n<p>两个父子关系的 div 绑定 click 事件，根据回调输出 log。</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 701px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.61904761904762%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0ElEQVQoz5WRTQqDMBCFvf8lqnbVXEBxJegVVMS1fys1MVFUfG1SlFar0gfDkJfMl2FGq+satKGglKKqKrC2hfLo22uaBpwLLJpnGTOOpHHO0XWdCsYY+r5XWfotaxVUCIFpmjCO4wo7gmo4UVmW8H0fnufBdV3EcbzCDoHL5Tak8jwHIQSGbuBu3hEEwX/A7eOiKEAeBPpNh2mYCMPwGvh52M4nyzI4jgPbtmFZFqIwugYOw6AG/qvDrwW9ti/z9vMdMEkSpGm6gx0VnHUn9QTf9mr/pOmqAwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"事件测试\"\n        title=\"事件测试\"\n        src=\"/blog/static/edfa7d3104f0b66995eb8175c5f40fe9/3914f/js-click.png\"\n        srcset=\"/blog/static/edfa7d3104f0b66995eb8175c5f40fe9/e1650/js-click.png 210w,\n/blog/static/edfa7d3104f0b66995eb8175c5f40fe9/8cae7/js-click.png 420w,\n/blog/static/edfa7d3104f0b66995eb8175c5f40fe9/3914f/js-click.png 701w\"\n        sizes=\"(max-width: 701px) 100vw, 701px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">事件测试</figcaption>\n  </figure></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>outer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>inner<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Let's get hold of those elements</span>\n<span class=\"token keyword\">var</span> outer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".outer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> inner <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".inner\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Let's listen for attribute changes on the</span>\n<span class=\"token comment\">// outer element</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">MutationObserver</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mutate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>outer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  attributes<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Here's a click listener…</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"timeout\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"promise\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  outer<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"data-random\"</span><span class=\"token punctuation\">,</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// …which we'll attach to both elements</span>\ninner<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> onClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nouter<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> onClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>点击内部 div 后的执行过程如下：</p>\n<p><strong>脚本执行：</strong></p>\n<ul>\n<li>将 script 推如 Tasks，因为 stack 空闲，执行 script 脚本，完成事件绑定</li>\n</ul>\n<p><strong>用户点击：</strong></p>\n<ul>\n<li>用户点击 inner div</li>\n<li>因为是在冒泡阶段触发，因此 inner 元素的 click 事件先触发，回调推入 Tasks 中</li>\n<li>冒泡向上，outer 元素的 click 事件触发，回调推入 Tasks 中</li>\n<li>当前没有 microtasks，Tasks 执行完毕，UI 更新</li>\n</ul>\n<p><strong>第一个事件回调（inner）：</strong></p>\n<ul>\n<li>从 Tasks 中取出任务（inner 元素的事件回调）</li>\n<li>打印<code class=\"language-text\">click</code>，</li>\n<li>setTimout 回调推入 webapis 的定时栈中</li>\n<li>将 Promise 的第一个 then 推入 microtasks 中</li>\n<li>修改 outer 的属性触发监听，将 MutationObserver 推入 microtasks</li>\n<li>检查 microtasks 中任务并执行</li>\n<li>打印 <code class=\"language-text\">promise</code>和<code class=\"language-text\">mutate</code></li>\n<li>第一个回调执行完毕，执行第二个 click 事件回调</li>\n</ul>\n<p><strong>第二个事件回调（outer）：</strong></p>\n<ul>\n<li>从 Tasks 中取出任务（outer 元素的事件回调）</li>\n<li>打印<code class=\"language-text\">click</code>，</li>\n<li>setTimout 回调推入 webapis 的定时栈中</li>\n<li>将 Promise 的第一个 then 推入 microtasks 中</li>\n<li>修改 outer 的属性触发监听，将 MutationObserver 推入 microtasks</li>\n<li>检查 microtasks 中任务并执行</li>\n<li>打印 <code class=\"language-text\">promise</code>和<code class=\"language-text\">mutate</code></li>\n<li>第二个回调执行完毕</li>\n</ul>\n<p><strong>setTimeout 回调：</strong></p>\n<ul>\n<li>上两个 Tasks 执行完毕，检查 webapis 是否有定时任务</li>\n<li>将 inner 中的 setTimeout 推入 Tasks</li>\n<li>执行回调输出<code class=\"language-text\">timeout</code></li>\n<li>检查 webapis 是否有定时任务</li>\n<li>将 outer 中的 setTimeout 推入 Tasks</li>\n<li>执行回调输出<code class=\"language-text\">timeout</code></li>\n</ul>\n<h4 id=\"需要注意的地方\" style=\"position:relative;\"><a href=\"#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%9C%B0%E6%96%B9\" aria-label=\"需要注意的地方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>需要注意的地方</h4>\n<ul>\n<li>注意冒泡过程添加 Tasks 的顺序</li>\n<li>Tasks 中的任务遵循先进先出的规则</li>\n<li>microtasks 中的任务在每次 Tasks 时都必须检查并执行完毕</li>\n</ul>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\" target=\"_target\" rel=\"nofollow\">Tasks, microtasks, queues and schedules</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=8aGhZQkoFbQ\" target=\"_target\" rel=\"nofollow\">Philip Roberts: What the heck is the event loop anyway? | JSConf EU 2014</a></li>\n</ul>","timeToRead":6,"wordCount":{"paragraphs":97,"sentences":98,"words":434},"fields":{"slug":"/js-shi-jian-ji-zhi/","relativePath":"2018/2018-03-24---js-shi-jian-ji-zhi/index.md"},"excerpt":"这里所指都是在浏览器环境中，而不是 Nodejs 环境。 JS 异步机制 关于 JS 简要的运行机制及事件队列等知识强烈希望能翻墙看下这个视频：地址。 这里有个很重要的图需要深刻理解：  Chrome 中的 V…","frontmatter":{"title":"JS事件机制及Tasks和microtasks的区别","date":"24 Mar 2018","tags":["JavaScript"],"cover":"","comments":true,"author":"烈风裘"}}},"pageContext":{"curr":"/cong-shu-ru-url-dao/","prev":"/js-shi-jian-ji-zhi/","next":"/wu-fu-wu-duan-de/"}},"staticQueryHashes":["3240721340","63159454"]}